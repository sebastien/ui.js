<html>
  <head>
    <meta charset="utf-8" />
    <!--
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sebastien/ui.js/src/css/uijs.css" type="text/css" media="all">
    -->
    <title>Color Palette</title>
    <link
      rel="stylesheet"
      href="../lib/css/ui.css"
      type="text/css"
      media="all"
    />
    <link
      rel="stylesheet"
      href="../lib/css/ui/theme/whitelabel.css"
      type="text/css"
      media="all"
    />
    <script type="importmap">
      { "imports": { "@ui.js": "/lib/js/ui.js", "@ui/": "/lib/js/ui/" } }
    </script>
  </head>
  <body>
    <slot template="Palette" color="#008BFD" />

    <!-- Displays a list of shade swatches for the given color -->
    <template
      name="Palette"
      in:color="#008BFD"
      in:modes="('oklab hwb srgb lab lsrgb xyz oklch lch'.split(' '))"
      in:shades="5"
      in:low="#000000"
      in:high="#FFFFFF"
      in:greyscale="false"
    >
      <input type="color" name="low" out:value="low" />
      <input type="color" name="color" out:value="color" />
      <input type="color" name="high" out:value="high" />

      <div
        out:style="color,low,high->{`--color-value:${color};--color-low:${low};--color-high:${high}`}"
      >
        <ul x:for="mode=modes">
          <li class="row" out:title="mode->{`mode=${mode}`}">
            <span class="w-8c" out:content="mode">â€¦</span>
            <ul
              class="row gap-0"
              x:for="shades->{$.range(shades)}"
              out:style="mode->{`--color-blend:var(--blend-${mode});`}"
            >
              <li
                class="swatch"
                out:title="#->{key}"
                out:style="#,mode,shades->{`background-color:color-mix(var(--blend-${mode}),var(--color-low),var(--color-value) ${Math.floor($.lerp(0,100,(key+1)/(shades+2)))}%);`}"
              ></li>
            </ul>
            <ul class="row gap-0">
              <li
                class="swatch"
                style="background-color: var(--color-value)"
              ></li>
            </ul>
            <ul
              class="row gap-0"
              x:for="shades->{$.range(shades)}"
              out:style="mode->{`--color-blend:var(--blend-${mode});`}"
            >
              <li
                class="swatch"
                out:title="#,shades->{key+shades}"
                out:style="#,mode,shades->{`background-color:color-mix(var(--blend-${mode}),var(--color-value),var(--color-high) ${Math.floor($.lerp(0,100,(key+1)/(shades+2)))}%);`}"
              ></li>
            </ul>
          </li>
        </ul>
      </div>
      <style>
        .swatch {
          width: 1.5em;
          height: 1.5em;
        }
      </style>
    </template>

    <script type="module">
      // import ui from "https://cdn.jsdelivr.net/gh/sebastien/ui.js/src/js/ui.js";
      import ui from "@ui.js";
      ui();
    </script>
  </body>
</html>
