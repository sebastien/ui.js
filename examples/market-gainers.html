<html>
  <head>
    <meta charset="utf-8" />
    <!--
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sebastien/ui.js/src/css/uijs.css" type="text/css" media="all">
    -->
    <link
      rel="stylesheet"
      href="../lib/css/ui.css"
      type="text/css"
      media="all"
    />
    <link
      rel="stylesheet"
      href="../lib/css/ui/theme/whitelabel.css"
      type="text/css"
      media="all"
    />
  </head>
  <body
    <section>
      <!-- We denote that we want an instance of the component -->
      <slot template="Announcements" title="NZX Announcements" />
    </section>
    <!--
      This declares "selection" as being an input and output, and that
      "title" and "sources" are both inputs. All of these will be sourced
      from the scope at component creation.
    -->
    <template name="Announcements" data-selection="0" date-state="loading">
      <div class="card w-c2 pad-4 bd stack gap-2">
        <h4>NZX Gainers &amp; Decliners</h4>

        <ul class="x list-h mt-4 gap-4"
          on:change="selection={parseInt(_.target.value)}"
        >
          <li class="bold label selectable" value="gainers">Gainers</li>
          <li class="bold label selectable" value="decliners">Decliners</li>
          <li class="bold label selectable" value="indices">Decliners</li>
        </ul>

        <!-- "state" here is an internal value -->
        <ul class="bd-t list-v mt-4 mb-4">
          <li class="mt-2 mb-2 pd-2 pb-2 bd-b stack">
            <div class="overview fit-w row">
              <span class="grow bold link">CBD</span>
              <span class="ib w-10c tr">$0.194</span>
              <span class="ib w-10c tr">8.99%</span>
            </div>
            <div class="detail fit-w row">
              <span class="grow bold">Cannasouth Limited Ordinary Shares</span>
              <span class="ib wc-10c tr tt small">1:44PM</span>
            </div>
          </li>
        </ul>
        <p class="dimmed mb-2">Last change on 30 October 2023 â€• 5:00 pm.Data is 20 mins delayed.</p>
        <p class="small">Data sourced from API deployed at <a href="https://api.nzx.dev/ticker/1.0">api.nzx.dev/ticker/1.0</a></p>

    </template>

    <script type="module">
      // import ui from "https://cdn.jsdelivr.net/gh/sebastien/ui.js/src/js/ui.js";
      import ui from "../lib/js/ui.js";
      ui(document, {
        title: "NZX Market Announcements",
        sources: [
          { url: "apis.nzx.com/public/", label: "Public API" },
          {
            url: "staging-apis.nzx.com/public/",
            label: "Public API (Staging)",
          },
        ],
        announcements: [
          { id: 230123, companyCode: "NZX", securityCode: "NZX" },
        ],
      });
    </script>
  </body>
</html>
